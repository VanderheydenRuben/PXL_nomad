#!/bin/bash
# {{ ansible_managed }}
# {{ ansible_default_ipv4.address }}
# {{ ansible_eth1.ipv4.address }}

datacenter = "dc1",
client_addr = "0.0.0.0",
bind_addr = "{{ ansible_eth1.ipv4.address }}",
rejoin_after_leave = true,
ui = true,

{% if consul_master == "yes" %}
bootstrap_expect = {{ groups['servers'] | length }},
{% endif %}

{% if consul_join == "yes" %}
start_join = [ "192.168.1.1" ],
{% endif %}

data_dir = "/opt/consul/",
{% if consul_server == "yes" %}
server = true
{% else %}
server = false
{% endif %}