job "webserver" {
  datacenters = ["dc1"]
  type = "service"

  group "webserver" {
    count = 1
    

    task "httpd" {
      driver = "docker"
	  
      config {
        image = "httpd"
		force_pull = true
        port_map {
          http = 80
        }
		logging {
			type = "journald"
			config {
				tag = "WEBSERVER"
				}
			}
      }

      resources {
        network {
          port "http" {
			static = 80
		  }
        }
      }

      service {
        name = "webserver"
        tags = ["webserver"]
        port = "http"
      }
    }
  }
}